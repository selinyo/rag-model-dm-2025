# Emergency Healthcare RAG
![Kiku](../images/emergency-rag-banner.png)

In this use case, your job is to help an emergency department answer critical medical questions fast and accurately!

You will receive medical statements about emergency healthcare conditions that need to be evaluated for truth and classified by topic. Each statement must be processed in two ways:
- **Binary classification**: Determine if the statement is true or false
- **Multi-class classification**: Identify which medical topic the statement concerns

The dataset (```data/```) comprises medical statements generated by Claude Opus based on reference articles covering 115 emergency healthcare topics (```data/topics/```). Your predictions will be scored by accuracy for both the binary classification (true/false) and multi-class classification (topic identification):

$$
Accuracy = \frac{\text{Number of correct predictions}}{\text{Total number of predictions}}
$$

The training set, validation set and evaluation set contain 200, 200 and 749 statements respectively. All statements are generated based on the medical reference material found in ```data/topics/```. The medical topics range from emergency conditions like stroke, cardiac arrest, and trauma to diagnostic procedures like CT scans, blood tests, and ECGs. The complete topic mapping is provided in ```data/topics.json```.

### Example Statement
**Statement**: "Cancer patients with pulmonary embolism have the highest VTE recurrence risk with pancreatic cancer, hematological malignancies, lung cancer, gastric cancer, and brain cancer carrying the greatest thrombotic risk, necessitating extended anticoagulation with LMWH or direct oral anticoagulants preferred over vitamin K antagonists."

**Expected Output**:
```json
{
  "statement_is_true": 1,
  "statement_topic": 63
}
```
*Topic 63 corresponds to "Pulmonary Embolism" in the topic mapping.*

## Constraints

Since this is an emergency department scenario, your solution must operate under strict constraints:

- **Speed**: Maximum 5 seconds per statement evaluation
- **Privacy**: Must run completely offline - no cloud API calls during inference
- **Memory**: Maximum 24GB VRAM usage at any time during inference

## Evaluation
During the week of the competition, you will be able to validate your solution against the validation set. You can do this multiple times, however, **you can only submit to the evaluation set once!** The best validation and evaluation score your model achieves will be displayed on the <a href="https://cases.dmiai.dk/teams"> scoreboard</a>. We encourage you to validate your code and API before you submit your final model to evaluation.

## Quickstart
Clone the repository and change folder to the emergency-healthcare-rag challenge

```cmd
git clone https://github.com/amboltio/DM-i-AI-2025
cd DM-i-AI-2025/emergency-healthcare-rag
```
Install dependencies
```cmd
pip install -r requirements.txt
```
Make a local prediction of a sample from the training data using a simple baseline model
```cmd
python example.py
```
### Serve your endpoint
Serve your endpoint locally and test that everything starts without errors

```cmd
python api.py
```
Open a browser and navigate to http://localhost:9050. You should see a message stating that the endpoint is running. 
Feel free to change the `HOST` and `PORT` settings in `api.py`. 

### Make your endpoint visible to the evaluation service
There are multiple options:
- **Local deployment** Ensure that the selected `PORT` on your network is open and redirecting traffic to your machine (this may not be possible depending on your network setup. Usually this involves changing settings in the admin panel of your router). 
- **Cloud deployment** Create a compute instance on UCloud, Microsoft Azure, Google Cloud, Amazon Web Services (AWS) or other cloud providers. Repeat the steps above on the compute instance. Note that UCloud instances will be available free of charge to participants in DM-in-AI. Please see [ucloud/getting-started.md](https://github.com/amboltio/DM-i-AI-2025/blob/main/emergency-healthcare-rag/ucloud/getting-started.md)


## About the data
The medical statements have been generated by Claude Opus based on StatPearls medical reference articles (```data/topics```). Medical topics include emergency conditions such as stroke, myocardial infarction, respiratory failure, and trauma, as well as diagnostic procedures like ECG interpretation, blood gas analysis, and medical imaging. The complete list of 115 topics is available in ```data/topics.json```.

## Tips & Getting Started

**Retrieval-Augmented Generation (RAG)** can be used with the reference articles in ```data/topics/```.
[ucloud/getting-started.md](https://github.com/amboltio/DM-i-AI-2025/blob/main/emergency-healthcare-rag/ucloud/getting-started.md)

### Offline LLM Frameworks
- **Ollama**, **llama.cpp**, **vLLM**, **Transformers** (Hugging Face)


### Performance Factors
Things like **model size**, **quantization** and **context length**, affect VRAM usage and inference speed.

## Acknowledgements
MD Caroline Schr√∏der for helping design the challenge